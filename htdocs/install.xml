<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<h2>Installation</h2>

<p>
Although the system makes installing other software very easy, the Zero
Install system itself still requires some work to install. You'll also
need to have <a href="http://freshmeat.net/depends/download-all/39759/">a few
other things</a> installed first (expat to parse the XML index files, wget to
download archives, tar, bzip2 and gzip to extract them, GPG to check they are
correctly signed, and D-BUS to report progress to graphical utilities). Most
systems will have these installed already, although you may be missing the
header files for expat (expat-dev). Note that, while you need libdbus
installed, you don't need any DBUS daemons running (we only use the library
part).
</p>

<div class='note'>
<h3>Security and stability note</h3>
<p>
This software is still under development and has not yet been carefully
audited. Please do not run it on public machines (eg, in a school) where
malicious users could exploit bugs in it.
Please let me know if you find any problems.
<!--
You could also install it under <a
href="http://user-mode-linux.sf.net">User Mode Linux</a> if you want to test
the kernel module in safety, although there have been no bugs discovered in
the last few versions. -->
</p>
</div>

<h3>Packages</h3>
<p>
If you don't want to build from source, choose your platform from the list
below to get a package tailored for your system...
</p>
<ul>
<li><a href="http://www.vectorlinux.com/forum/viewtopic.php?t=1380">Vector Linux package</a></li>
<li><a href="http://lists.ibiblio.org/pipermail/sm-grimoire/2003-December/003306.html">Sorcerer GNU Linux spell</a></li>
<li><a href="http://www.cscience.org/pipermail/gobo-l/2003-December/002204.html">Gobo Linux recipe</a></li>
<li><a href="http://bugs.gentoo.org/show_bug.cgi?id=35768">Gentoo ebuild</a></li>
<li><a href="http://www.mandrakeclub.com/modules.php?op=modload&amp;name=RPM&amp;func=info_page&amp;RID=1825">Mandrake RPM</a> (request)</li>
</ul>

<h2>Building from source</h2>

<p>The Zero Install system requires a small Linux kernel module to provide
the <tt>/uri/0install</tt> directory. Like all kernel modules, you must
compile this using the actual kernel headers for the kernel you're actually
running. The easiest way to ensure this is to have compiled your own kernel
(eg, from <a href="http://kernel.org">kernel.org</a>) and be running that.
There are plenty of guides on the net if you don't feel confident about
compiling your own kernel. For example,
<a href="http://www.osnews.com/story.php?news_id=2949">The Very Verbose Guide
to Updating and Compiling Your Debian Kernel</a> (which isn't very Debian
specific, despite the name) and
<a href="http://www.osnews.com/story.php?news_id=443">Compiling the Linux
Kernel</a>.
</p>

<p>
Supported kernels are:
</p>
<ul>
<li> Linux 2.4 series</li>
<li> Linux 2.6 series</li>
</ul>
<p>
If you want to port the (small) module to other kernels (BSD, MacOS
X, etc) please get in touch.
</p>

<p>
We want to make the installation as easy as possible, so if you get stuck,
please <a href="support.html">write to us</a> or
<a href="http://sourceforge.net/tracker/?group_id=76468&amp;atid=547191">file
a bug report</a>.
</p>

<h3>Installing the LazyFS kernel module</h3>

Download the kernel module for your operating system:

<ul>
<li><a href="http://osdn.dl.sourceforge.net/sourceforge/zero-install/lazyfs-linux-0.1.20.tgz.gpg">lazyfs-linux-0.1.20.tgz.gpg</a> (Linux 2.4 and 2.6 series kernels)</li> 
</ul>

<p>
Check the GPG signature, unpack the archive, and move to the new directory
(things you type are shown in bold):
</p>

<pre>
$ <b>gpg lazyfs-linux-0.1.20.tgz.gpg</b>
gpg: Signature made Sun 15 Feb 2004 12:46:54 GMT using DSA key ID 59A53CC1
gpg: Can't check signature: public key not found
$ <b>tar xzf lazyfs-linux-0.1.20.tgz</b>
$ <b>cd lazyfs-linux-0.1.20</b>
</pre>

<p>If you have my GPG key (see page header) in your keyring, the first step
will tell you whether the achive is correctly signed. If not, you'll get the
message shown above, but you can still continue anyway. The reason for using
GPG here is partly to increase security, and partly to make sure you've got
GPG installed (you'll need it later!).
</p>

<p>
Now, configure, make and install (use su to get root privileges):
</p>

<pre>
$ <b>./configure</b>
$ <b>make</b>
$ <b>su -c 'make install'</b>
*** Testing kernel module ***
</pre>

<ul>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/349">The file ~/.../include/linux/version.h does not exist</a></li>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/367">QM_MODULES: Function not implemented</a></li>
</ul>

<h3>Installing Zero Install</h3>

<p>Once you've got LazyFS installed (see above), you can install Zero
Install. Download latest version:</p>

<ul>
<li><a href="http://prdownloads.sourceforge.net/zero-install/zero-install-0.1.21.tgz.gpg?download">zero-install-0.1.21.tgz.gpg</a></li> 
</ul>

<p>
Check the GPG signature and unpack as before:
</p>

<pre>
$ <b>gpg zero-install-0.1.21.tgz.gpg</b>
$ <b>tar xzf zero-install-0.1.21.tgz</b>
$ <b>cd zero-install-0.1.21</b>
</pre>

<p>
For security reasons, it's better not to run zero install as root. So you'll
now need to choose a user to run the helper as. This could be your own user
name, or (<a href="http://sourceforge.net/mailarchive/message.php?msg_id=6386789">ideally</a>) you could create a new user just for this purpose. Run
configure with the name of your chosen user (here called 'zeroinst'):
</p>

<pre>
$ <b>./configure --with-user=zeroinst</b>
$ <b>make</b>
$ <b>su -c 'make install'</b>
</pre>

<ul>
<li>Can't find D-BUS? Try setting PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/local/lib/pkgconfig</li>
</ul>

<p>
This will create the <tt>/uri/0install</tt> mount point and the
<tt>/var/cache/zero-inst</tt> cache directory. It will also add an entry to
<tt>/etc/fstab</tt> to allow mounting <tt>/uri/0install</tt> easily. If you
were already running an older version, this step also unmounts /uri/0install.
</p>

<p>
Now, run zero install (it will just wait, without doing anything).
You can look at <tt>/var/log/daemon.log</tt> (or whatever your system uses)
to see what it's doing. SuSE uses <tt>/var/log/messages</tt> instead.
</p>

<pre>
$ <b>su -c '/etc/init.d/0install start'</b>
Starting zero-install...
(mounting /uri/0install)
$ <b>tail /var/log/daemon.log</b>
Oct  5 16:00:16 everest zero-install: Started: using cache directory '/var/cache/zero-inst'
</pre>

<ul>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/73">mount: wrong fs type...</a></li>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/332">error while loading shared libraries: libdbus-1.so.0</a></li>
</ul>

<h2>Testing the installation</h2>

<p>
With zero install still running, try the following command:
</p>

<pre>
$ <b>cat /uri/0install/zero-install.sourceforge.net/demo/test.txt</b>
It worked!
</pre>

<ul>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/331">got_site_index_archive: Failed to fetch index archive in log file</a></li>
</ul>

<p>
Users can see what they are currently downloading with the ZeroProgress
utility, itself available via Zero Install:
</p>

<pre>
$ <b>/uri/0install/zero-install.sourceforge.net/apps/ZeroProgress/AppRun &amp;</b>
Starting ZeroProgress...
Ready and waiting...
</pre>

<div class='note'>
Note that ZeroProgress requires the dbus-glib library, which is supplied as
part of libdbus. If you're using Debian packages, you need to install the
<tt>dbus-glib-1</tt> package.
</div>

<p>
No windows appear on the screen when you run this, but any futher downloads
will display a progress box. Note that the GTK library is not yet in
Zero Install, so you need to have that installed by traditional methods.
</p>

<p>
You can open the <a href="http://rox.sourceforge.net/phpwiki/index.php/ROX-Filer">ROX-Filer</a>
window shown on the main page using these commands (which also fetch the
filer itself through Zero Install):
</p>

<pre>
$ <b>alias rox=/uri/0install/rox.sourceforge.net/rox</b>
$ <b>rox /uri/0install/rox.sourceforge.net/apps</b>
</pre>

<ul>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/351">relocation error running rox</a></li>
</ul>

<!--
<p>
You can also find XFree86 4.3.1 in the `libs' directory. You can run either
the client applications (eg, xterm) with your current X server, or run the
X server itself (or both). Note that you may have to stare at a blank screen for
a while as the libraries are pulled in.
</p>
<pre>
$ <b>cd /uri/0install/zero-install.sourceforge.net/libs/XFree86/4.3.1/Linux-i386/bin</b>
$ <b>./XFree86 -version</b>
XFree86 Version 4.3.0
Release Date: 27 February 2003
# <b>./XFree86 :1</b>
</pre>
-->

<p>
This window will then appear (see the <a
href="http://rox.sourceforge.net/phpwiki/index.php/ZeroInstall">ROX Wiki
page</a> for more details):
</p>

<p style='text-align: center'>
<img width="443" height="199" src="apps.png" alt="The apps directory"/>
</p>

<p>
Links to other sites with more software, including Mozilla, Python, Acrobat
reader, pkg-config, GTK, Java and NEdit, can be found in the directory
<tt>/uri/0install/zero-install.sourceforge.net/links</tt>.
</p>

<h3>Notes</h3>
<ul>
<li>I/O errors indicate that the helper failed to fetch the requested file.
ZeroProgress should pop up a box with an explanation, if it's running. Otherwise,
check the log file (as shown above).</li>
<li>When you reboot, /uri/0install is automatically mounted, but the
zero-install helper program is <strong>not</strong> run automatically.
Therefore, you will get I/O errors when trying to access anything new, until
you start the helper.
</li>
</ul>

<h2>Further reading</h2>

<p>Please see <a href="docs.html">the documentation</a> for more information.</p>

</html>
