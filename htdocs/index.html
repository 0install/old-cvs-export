<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<link rel='stylesheet' type='text/css' href='style.css' />
<title>The Zero Install system</title>
</head>
<body>

<h1>The Zero Install system</h1>
<p class='author'>Thomas Leonard &lt;tal197 at users.sf.net&gt;, 2003</p>

<h2>Introduction</h2>

<p class='q'>What is it?</p>

<p>
The Zero Install system makes software installation not merely
easy, but unnecessary. Users run their applications directly from the
internet from the software author's pages. Caching makes this as fast
as running a normal application after the first time, and allows
off-line use.
</p>

<p class='q'>Show me an example.</p>

<p>
Let's say you're looking for a little desktop reminder application. You
search <a href="http://freshmeat.net">Freshmeat.net</a> and find
<a href="http://rox.sf.net/memo.php3">Memo</a>. You open the directory
containing Memo (on the remote machine) with your file manager:
</p>

<p>
Click on Memo to run it, and it will run. Now, Memo depends on ROX-Lib2,
which requires pygtk, with needs python2.2 and GTK+-2, which needs glib,
pango, AKT and pkg-config. But that's OK, Memo runs everything it
needs directly from the remote machines where they're stored.
</p>

<p>
The first time you ran Memo, a progress indicator appeared showing the
download progress. If you quit it and run it again, it will start instantly,
because the Zero Install system has cached everything locally.
</p>

<p class='q'>What about package management systems like APT?</p>

These require a central authority to maintain the database. For example, you
can't install Memo using the Debian, because they don't package it. The best an
author can do is provide Debian .deb packages on the site. But then the user
still has to do the manual dependancy resolution above for everything not in
Debian's system.
</p><p>
Also, a user installing from a .deb, .rpm, etc still has to enter the root
password and run a script as root. This is inconvenient and a security risk.
Zero Install allows uses to run software without root privileges.
</p>
See the <a href="compare.html">comparison with other systems</a> document
for a more detailed list of the advantages of Zero Install.
</p>

<h2>Setting up the zero-installation system</h2>

<p>
<a href="http://www.osnews.com/story.php?news_id=2949">The Very Verbose Guide to Updating and Compiling Your Debian Kernel</a>
</p>

<p>
Although it allows other software to be run easily, the
zero-installation system itself does require installation. Also, since
it's currently a quickly-knocked-up prototype, it's probably quite hard
to install. It might be buggy too, so don't run it on anything
important; it's just a proof-of-concept. If you don't want to actually
run it, you can still follow this tutorial to understand how it works.
</p>
<p>
The system works by making resources which are available via HTTP
appear in the filesystem, using the LazyFS filesystem. LazyFS requires
the coda kernel module, which comes with Linux 2.4 kernels.
</p>
<p>
Start by loading the coda module:
</p>
<pre>
# modprobe coda
</pre>
<p>
If that works, there's a good change you'll be able to try the system
out. If not, it's probably either because you don't have coda (visit
<a href="http://www.kernel.org">kernel.org</a> and get a newer kernel)
or, possibly, because it's compiled in.
</p>

<p>
Get the zero-installation code: Zero-Installtion-0.1.4 ALPHA PROTOTYPE
[ <a href="http://prdownloads.sourceforge.net/zero-install/zero-inst-0.1.4.tgz">
Mirrors</a> ].
</p>
<p>
Enter the directory and compile it (it requires
<a href="http://www.gtk.org">glib</a>):
</p>
<pre>
# tar xzf zero-inst-0.1.4.tgz
# cd zero-inst-0.1.4
# make
cc `pkg-config --cflags glib-2.0` -Wall -g -O2  `pkg-config --libs glib-2.0`  lazy.c   -o lazy
</pre>
<p>
Now run the 0install script. This is a little shell script that will
create the cache directory (/var/cache/zero-install), the mount point
(/uri) and the device file (/dev/cfs0) if any of them are missing. It
will then start the system, and mount /uri for you:
</p>
<pre>
# ./0install
Creating coda device /dev/cfs0
Creating /uri
Creating cache directory /var/cache/zero-inst
Using helper: /home/tal00r/zero-inst-0.1.4/helper
Flushing kernel cache...
Mounting /uri...
Ready...
</pre>
<p>
Leave that running and switch to another window. Now check it worked:
</p>
<pre>
# cat /uri/http/zero-install.sourceforge.net/test.txt
It worked!
</pre>

<h2>Using the system</h2>

<p>
You can now run programs directly using a pathname based on their URI.
We'll start with a simple shell script:
</p>

<pre>
$ /uri/http/www.ecs.soton.ac.uk/~tal00r/zero-installation/hello.sh
Hello World from sh
</pre>
<p>
Of course, you can alias this or use other mechanisms to make it easy
to use again (the exact syntax may depend on your shell):
</p>
<pre>
$ alias hi=/uri/http/www.ecs.soton.ac.uk/~tal00r/zero-installation/hello.sh
$ hi
Hello World from sh
</pre>
<p>
Notice that there was a brief delay on the first run, but the second
run is instant. The program has been cached. Of course, the power of
the system comes from handling dependancies. This next example runs a
python program which, in turn, runs a new shell script:
</p>

<pre>
$ cd /uri/http/www.ecs.soton.ac.uk/~tal00r/zero-installation
$ ./testpy
Hello from python!
This is another shell script
</pre>
<p>
If you'd like to try a graphical application, run this command to open
a <a href="http://rox.sf.net/rox_filer.php3">ROX-Filer</a> window showing
<a href="http://rox.sf.net/archive.php3">Archive</a>. Click on it to run it.
(note that ROX-Filer and pygtk are NOT yet in the zero-install system, so
you do need them installed already)
</p>
<pre>
$ rox /uri/http/www.ecs.soton.ac.uk/~tal00r/zero-installation/archive-1.9.1
</pre>

<p style='text-align:center'>
<img src='archive.png' width='540' height='140'
     alt='ROX-Filer window showing remote Archive application' />
</p>

<p>
Note that Archive requires <a href="http://rox.sf.net/rox_lib.php3">ROX-Lib2</a>
to run. That's OK; ROX-Lib2 will be run from the zero-installation system
automatically.
</p>

<p>
If you want to experiment with providing your own programs through
this system you'll need to run the build_meta command to create the
directory listings (it creates .0inst-dir files recursively).
</p>

<pre>
$ alias 0build=/uri/http/www.ecs.soton.ac.uk/~tal00r/zero-installation/tools/build_meta
$ 0build public_html
</pre>

<p>
Tip for developers: If you rebuild a directory that has already been
cached, you can use 'rmdir' on the directory to force it to be
reloaded (note, this does not behave like a regular rmdir; for one
thing, the directory doesn't have to be empty). This will return an
error to the rmdir command, but the contents will be refetched on the
next access.
</p>

<p>
If you need to supply a different binary depending on the user's
platform, you can use the .0inst-platform symlink. This example will
run a compiled C program, choosing the correct binary for your
platform (I've only compiled it for Linux-ix86, so this demo isn't
very impressive, but you get the idea):
</p>
<pre>
$ /uri/http/www.ecs.soton.ac.uk/~tal00r/zero-installation/.0inst-platform/hello_c 
Hello World from C!
</pre>
<p>
The .0inst-platform is a symlink whose target is "Linux-ix86" (or
whatever platform the user is running on).
</p>

<p style='float: right;'>
<a href="http://sourceforge.net/projects/zero-install">
<img width="88" height="31" alt="SF logo"
     src="http://sourceforge.net/sflogo.php?group_id=7023&amp;type=1" /></a>

<a class='outside' href="http://validator.w3.org/check/referer"><img
  src="http://www.w3.org/Icons/valid-xhtml10"
  alt="Valid XHTML 1.0!" height="31" width="88" /></a>
</p>

</body>
</html>
