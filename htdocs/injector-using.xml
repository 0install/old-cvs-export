<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<h2>Trying it out the injector</h2>

<p>
Now that you've <a href='injector.html'>installed the injector</a>, let's try using it to
get more software.
</p>

<div class='note'>
<strong>2005-10-30</strong> It seems that <a href='http://news.bbc.co.uk/1/hi/england/hampshire/4390048.stm'>our
university department has burned down</a>. This probably explains why DNS isn't working. Therefore, please
add this line to your <b>/etc/hosts</b> file:
<pre>
66.35.250.210   0install.net
</pre>
</div>

<h3>Example: Running Edit with the injector</h3>

<div class='note'>Run this as a normal user, not as root!</div>

<p>
Run <b>0launch</b>, giving it the URL for the program you want to run (<b>-v</b> gives
verbose output):
</p>

<pre>
$ <b>0launch -v http://rox.sourceforge.net/2005/interfaces/Edit</b>
INFO:root:Need to download; switching to GUI mode
INFO:root:Interface &lt;Interface http://0install.net/2005/interfaces/injector-gui&gt; has no implementations!
INFO:root:Currently downloading:
INFO:root:- http://0install.net/2005/interfaces/injector-gui
INFO:root:Updated interface cache entry for Injector-GUI (modified 2005-09-20 19:59:45 UTC)
INFO:root:Currently downloading:
INFO:root:- http://osdn.dl.sourceforge.net/sourceforge/zero-install/injector-gui-0.14.tgz
INFO:root:Caching new implementation (digest sha1=2a7a02bb4d9714ffe0da4b6bfabdd62110f9f0ea)
INFO:root:Executing: ~/.cache/0install.net/implementations/sha1=2a7a02bb4d9714ffe0da4b6bfabdd62110f9f0ea/0launch-gui
</pre>

<p>
So what happened?
</p>

<ol>
<li>The injector realised that it needed to download some files to run Edit, so
it switched to graphical mode (use <b>--console</b> to disable this).</li>
<li>First, it needed to download the GUI itself. It fetched the GUI's interface
file, which tells it which versions are available.</li>
<li>Normally, the injector would ask whether you trusted the key, but since the GUI
is signed with the same key as the injector, it already knows this one.</li>
<li>0launch then selected a suitable implementation of the GUI interface (<b>injector-gui-0.14</b>).</li>
<li>It downloaded the archive from sourceforge, unpacked it, checked that
the signature was correct, and moved it into the cache directory.</li>
</ol>

<div class='note'>TODO: Archives are currently unpacked to your home directory, in
<b>~/.cache/0install.net/implementations</b>. In future, they will unpack to
<b>/var/cache/0install.net/implementations</b>, using a setuid helper (which will
check the cryptographic digest first, of course).</div>

<p>
Once the GUI has been fetched, it displays this dialog box:
</p>

<p style='text-align: center'>
<img width="545" height="325" src="edit-injector.png"
     alt="Running Edit with the injector" />
</p>

<p>
The main part of the window contains a list of all the components needed to run Edit.
At the top is Edit itself, and shown below is ROX-Lib, which Edit needs in order to function.
If you are happy with the selected versions, click on <b>Execute</b> to run the
program.
</p>

<p>
When you click on <b>Execute</b>, the injector will start downloading the two chosen
versions (this time showing the progress in a window, now the GUI is being used):
</p>

<p style='text-align: center'>
<img width="327" height="144" src="injector-downloading.png"
     alt="Downloading Edit and ROX-Lib" />
</p>

<p>When the downloads are complete, Edit itself runs:</p>

<p style='text-align: center'>
<img width="395" height="230" src="edit-running.png"
     alt="Edit running" />
</p>

<p>
By default, the GUI confirmation box is only shown if the injector needs to download something.
If you run the command again once <b>Edit</b> has been cached, Edit will run immediately. To get back to
the dialog box, use the <b>--gui</b> option:
</p>

<pre>
$ <b>0launch --gui http://rox.sourceforge.net/2005/interfaces/Edit</b>
</pre>

<h2>Creating an alias</h2>

<p>
It's annoying to have to keep typing in the full URL for Edit. The <b>0alias</b> command
can be used to create little shell scripts to start programs easily:
</p>

<pre>
$ <b>0alias rox-edit http://rox.sourceforge.net/2005/interfaces/Edit</b>
Created script '/home/talex/bin/rox-edit'.
To edit policy: rox-edit --versions
(note: some shells require you to type 'rehash' now)
</pre>

<p>
The command puts the script in the first directory in your $PATH, which must therefore be
writable. You can now run edit like this:
</p>

<pre>
$ <b>rox-edit</b>
</pre>

<p>
To get back to the policy box (so you can change which versions of Edit and
ROX-Lib you want used), run it like this:
</p>

<pre>
$ <b>rox-edit --versions</b>
</pre>

<p>
Of course, if you don't normally use the shell for running applications then you should use some other
utility to make new programs easy to run. For example, users of the <a href="http://rox.sf.net">ROX desktop</a>
would run <a href='http://rox.sourceforge.net/phpwiki/index.php/AddApp'>AddApp</a> to create a ROX application
directory launcher.
</p>

<h2>Policy settings</h2>

<p>
You can affect which versions are chosen by changing your policy. Three aspects
of your policy are shown in the main window: <b>Network use</b>, <b>Freshness</b>
and <b>Help test new versions</b>. Click on <b>Help test new versions</b>, and
you may see the version numbers increase, as the injector chooses newer, less
well tested, versions. Note however that you may not see any change at all,
since there may not be new testing versions available when you try it.
</p>

<p style='text-align: center'>
<img width="569" height="364" src="inject.png"
     alt="The injector selects versions according to the user's policy" />
</p>

<p>
To get the injector to notice that a new version is available, click on the <b>Refresh all now</b>
button (which fetches a fresh copy of each listed interface). You can also set the freshness
policy; the injector will automatically check for updates to interfaces that haven't been
checked within the allowed time.
</p>

<p>
These are not the only policy settings. The rest are per-component, and are
accessed by double-clicking on a line in the list. This is described in the following sections.
</p>

<p>Note that all changes to your policy are saved as soon as you make them.
Clicking on <b>Cancel</b> will close the window without running the program,
but any changes made to the policy are not reversed.
</p>


<h3>Choosing different versions</h3>

<p>
The interface URI (<b>http://rox.sourceforge.net/2005/interfaces/Edit</b>) is
used to get the default list of implementations. You can see the information
about an interface by double-clicking on it in the list of interfaces. For
example, double-clicking on <b>Edit</b> displays this dialog box:
</p>

<p style='text-align: center'>
  <img width="756" height="442" src="edit-properties.png"
  	alt="Properties of the Edit interface" />
</p>

<p>
The information displayed is fetched from the interface file, which you can view in
a web browser if you're interested:
<a href="http://rox.sourceforge.net/2005/interfaces/Edit">Edit's interface</a>. This is
a plain-text GPG-signed file. The injector stores the downloaded interface files
locally (in <b>~/.cache/0install.net/interfaces</b>).
</p>

<h3>Stability</h3>

<p>
The interface file also gives a stability rating for each implementation. The following
levels are allowed:
</p>

<ul>
<li>Stable</li>
<li>Testing</li>
<li>Developer</li>
<li>Buggy</li>
<li>Insecure</li>
</ul>

<p>
Stability ratings are kept independently of the implementations, and are expected to change over
time. When any new release is made, its stability is initially set to <b>Testing</b>. If you
have selected <b>Help test new versions</b> then you will then start using it.
Otherwise, you will continue with the previous stable release. After a while
(days, weeks or months, depending on the project) with no serious problems
found, the author will change the implementation's stability to <b>Stable</b> so that
everyone will use it.
</p>

<p>
If problems are found, it will instead be marked as <b>Buggy</b>, or <b>Insecure</b>. The injector
won't select either by default, but it is useful to see the reason (you might opt to
continue using a buggy version if it works for you, but should never use an insecure
one). <b>Developer</b> is like a more extreme version of <b>Testing</b>, where the program is
expected to have bugs.
</p>

<p>
You can use the <b>Preferred Stability</b> setting in the interface dialog to choose which
versions to use. You can also change the stability rating of any implementation by clicking on it
and choosing a new rating from the popup menu. User-set ratings are shown in capitals.
</p>

<p>
As you make changes to the policy and ratings, the order of the implementations in the list
will change. The version at the top is the one that the injector will actually use. In addition
to the ratings above, you can set the rating to <b>Preferred</b>. Such versions always come first,
unless they're not cached and you are in Off-line mode.
</p>

<p>
Note: If you want to use the second item on the list because the first is
buggy, for example, then it is better to mark the first version as buggy than to mark the
second as preferred. This is because when a new version is available, you will want that to
become the version at the top of the list, whereas a preferred version will always be first.
</p>

<h2>More Zero Install software</h2>

<p>
Here are some sites that have already started providing software via this system. If you find any
more, write to the list to let us know and we will add them here.
</p>

<ul>
 <li><a href='http://0install.net/injector.html'>0install.net</a> provides the injector GUI
 (<a href="http://0install.net/2005/interfaces/">http://0install.net/2005/interfaces/</a>).</li>

 <li><a href='http://rox.sf.net'>rox.sf.net</a> provides AddApp, Archive, Edit,
 MIME-Editor, Memo, OroboROX, ROX-Filer, ROX-Lib, ROX-Session, Resolution, and
 Wallpaper
 (<a href="http://rox.sourceforge.net/2005/interfaces/">http://rox.sourceforge.net/2005/interfaces/</a>).</li>

 <li><a href='http://www.kerofin.demon.co.uk'>kerofin.demon.co.uk</a> provides 
Album, Depend, Desktop2App, DownloadManager, Fetch, Launch, Mail, NetStat, Thumbs, and VideoThumbnail
 (<a href="http://www.kerofin.demon.co.uk/2005/interfaces">http://www.kerofin.demon.co.uk/2005/interfaces</a>).</li>

 <li><a href='http://www.hayber.us/'>hayber.us</a> provides Find, Menu, MusicBox, Ripper and Volume
 (<a href="http://www.hayber.us/0install/">http://hayber.us/0install/</a>).</li>

 <li><a href='http://www.brucalipto.org/docs/injector_en.html'>www.brucalipto.org</a> provides Subversion and svnadmin
 (<a href="http://www.brucalipto.org/injector/">http://www.brucalipto.org/injector/</a>).</li>

 <li><a href="http://lgames.sourceforge.net/">lgames.sourceforge.net</a> provides a selection of classic games,
including Barrage, LBreakout, LGeneral, LMarbles, Lpairs and Ltris.</li>

 <li><a href="http://user.cs.tu-berlin.de/~karlb/penguin-command/">user.cs.tu-berlin.de</a> provides the
 Penguin-Command game (<a href='http://people.freenet.de/LinuxCNC/0install/penguin-command'>hosted on people.freenet.de</a>).</li>
</ul>

<h2>Trouble-shooting</h2>

<p>
If the injector isn't doing what you expect, run it with logging turned up
using either <b>-v</b> (verbose) or <b>-vv</b> (very verbose!). Use <b>-c</b>
to prevent it switching to GUI mode too. Eg:
</p>

<pre>
$ <b>0launch -vvc http://rox.sourceforge.net/2005/interfaces/Edit</b>
DEBUG:root:Location of 'implementation-dirs' config file being used: 'None'
DEBUG:root:Added system store '/var/cache/0install.net/implementations'
DEBUG:root:Supported systems: '{None: 2, 'Linux': 1}'
DEBUG:root:Supported processors: '{None: 4, 'i386': 3, 'i586': 1, 'i486': 2, 'i686': 0}'
DEBUG:root:Recalculate! root = http://rox.sourceforge.net/2005/interfaces/Edit
DEBUG:root:Initialising new interface object for http://rox.sourceforge.net/2005/interfaces/Edit
DEBUG:root:Loading cached information for &lt;Interface http://rox.sourceforge.net/2005/interfaces/Edit&gt;
	from /home/talex/.cache/0install.net/interfaces/http%3a%2f%2frox.sourceforge.net%2f2005%2finterfaces%2fEdit
DEBUG:root:Staleness for &lt;Interface http://rox.sourceforge.net/2005/interfaces/Edit&gt; is 120.23 hours
DEBUG:root:Processing feed &lt;Feed from /home/talex/Projects/Edit/Edit.xml&gt;
DEBUG:root:Initialising new interface object for /home/talex/Projects/Edit/Edit.xml
DEBUG:root:Loading local interface file '/home/talex/Projects/Edit/Edit.xml'
DEBUG:root:get_best_implementation(&lt;Interface http://rox.sourceforge.net/2005/interfaces/Edit&gt;),
	with feeds: [&lt;Feed from /home/talex/Projects/Edit/Edit.xml&gt;]
DEBUG:root:Will use implementation /home/talex/Projects (version 2.0.0)
DEBUG:root:Considering dependency &lt;Dependency on http://rox.sourceforge.net/2005/interfaces/ROX-Lib;
	bindings: 1 [&lt;environ PYTHONPATH += ROX-Lib2/python&gt;]&gt;
DEBUG:root:Initialising new interface object for http://rox.sourceforge.net/2005/interfaces/ROX-Lib
DEBUG:root:Loading cached information for &lt;Interface http://rox.sourceforge.net/2005/interfaces/ROX-Lib&gt;
	from /home/talex/.cache/0install.net/interfaces/http%3a%2f%2frox.sourceforge.net%2f2005%2finterfaces%2fROX-Lib
DEBUG:root:Staleness for &lt;Interface http://rox.sourceforge.net/2005/interfaces/ROX-Lib&gt; is 20.95 hours
DEBUG:root:Processing feed &lt;Feed from /home/talex/Projects/ROX-Lib2/ROX-Lib.xml&gt;
DEBUG:root:Initialising new interface object for /home/talex/Projects/ROX-Lib2/ROX-Lib.xml
DEBUG:root:Loading local interface file '/home/talex/Projects/ROX-Lib2/ROX-Lib.xml'
DEBUG:root:get_best_implementation(&lt;Interface http://rox.sourceforge.net/2005/interfaces/ROX-Lib&gt;),
	with feeds: [&lt;Feed from /home/talex/Projects/ROX-Lib2/ROX-Lib.xml&gt;]
DEBUG:root:Will use implementation /home/talex/Projects (version 2.0.2.0)
DEBUG:root:Staleness for &lt;Interface http://rox.sourceforge.net/2005/interfaces/Edit&gt; is 120.23 hours
DEBUG:root:Staleness for &lt;Interface http://rox.sourceforge.net/2005/interfaces/ROX-Lib&gt; is 20.95 hours
INFO:root:PYTHONPATH=/home/talex/Projects/ROX-Lib2/python:/home/talex/Projects/ROX-Lib2/python
INFO:root:Executing: /home/talex/Projects/Edit/AppRun
</pre>

<p>
In the example above, the injector ends up using my local CVS copies of both Edit and ROX-Lib. If you still
have problems, please <a href='support.html'>write to the mailing list</a>.
</p>

<h2>Further reading</h2>

<ul>
<li><a href="injector-packagers.html">The Injector: Packaging Guide</a> is for people who
want to make software available to others through the injector.</li>
<li><a href="injector-design.html">The Injector: Design</a> explains the design of the injector
itself.</li>
<li><a href="http://thread.gmane.org/gmane.comp.file-systems.zero-install.devel/803">Release notes and future plans</a>.</li>
</ul>
 
</html>
